<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ASCON Suite: Porting the ASCON permutation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ASCON Suite
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Porting the ASCON permutation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Most of ASCON Suite is written in C and provides high-level API's for encryption, hashing, and other modes. The main exception is the core ASCON permutation which is implemented in C or assembly code depending on the platform.</p>
<p>The backend permutation implementations are located in the <code>src/core</code> directory. Each backend provides a "state and permutation" (SnP) interface to the rest of the library and user applications. See the <a class="el" href="permutation.html">Permutation</a> page for more information on using the SnP API directly in your own code.</p>
<p>With the assembly code backends, the core permutation is implemented in assembly code but some of the SnP utility functions may still be in C.</p>
<table class="doxtable">
<tr>
<td><b>Backend</b></td><td><b>Language</b></td><td><b>Word Representation</b></td><td><b>Platforms</b> </td></tr>
<tr>
<td>c32</td><td>C</td><td>Sliced 32-bit</td><td>Default plain C implementation for 32-bit systems </td></tr>
<tr>
<td>c64</td><td>C</td><td>Host 64-bit</td><td>Default plain C implementation for 64-bit systems </td></tr>
<tr>
<td>armv6</td><td>ASM</td><td>Sliced 32-bit</td><td>ARMv6, e.g. Raspberry Pi 3 running the 32-bit Raspberry Pi OS </td></tr>
<tr>
<td>armv6m</td><td>ASM</td><td>Sliced 32-bit</td><td>ARM Cortex M0 and M0+ </td></tr>
<tr>
<td>armv7m</td><td>ASM</td><td>Sliced 32-bit</td><td>ARM Cortex M3, M4, and M7 </td></tr>
<tr>
<td>armv7a</td><td>ASM</td><td>Sliced 32-bit</td><td>ARM Cortex A7 (uses armv7m backend) </td></tr>
<tr>
<td>armv8m</td><td>ASM</td><td>Sliced 32-bit</td><td>ARM Cortex M33 (uses armv7m backend) </td></tr>
<tr>
<td>armv8a-64</td><td>ASM</td><td>Host 64-bit</td><td>64-bit ARMv8-A; e.g. Raspberry Pi 4 running the 64-bit Raspberry Pi OS </td></tr>
<tr>
<td>avr5</td><td>ASM</td><td>8-bit</td><td>AVR5 and higher; e.g. ATmega328P (Arduino Uno), ATmega2560 (Arduino Mega 2560), ... </td></tr>
<tr>
<td>i386</td><td>ASM</td><td>Sliced 32-bit</td><td>32-bit x86 systems (i386/i486/i586/i686) </td></tr>
<tr>
<td>m68k</td><td>ASM</td><td>Sliced 32-bit</td><td>32-bit 680x0 and ColdFire systems </td></tr>
<tr>
<td>riscv32e</td><td>ASM</td><td>Sliced 32-bit</td><td>32-bit RISC-V systems, RV32E base integer instruction set </td></tr>
<tr>
<td>riscv32i</td><td>ASM</td><td>Sliced 32-bit</td><td>32-bit RISC-V systems, RV32I base integer instruction set </td></tr>
<tr>
<td>riscv64i</td><td>ASM</td><td>Host 64-bit</td><td>64-bit RISC-V systems, RV64I base integer instruction set </td></tr>
<tr>
<td>x86-64</td><td>ASM</td><td>Host 64-bit</td><td>64-bit x86-64 systems </td></tr>
<tr>
<td>xtensa</td><td>ASM</td><td>Host 64-bit</td><td>Xtensa, as used on ESP32 and ESP8266 modules, using funnel shifts for 64-bit word rotations </td></tr>
</table>
<p>The "armv7m" backend can run unmodified on many higher-spec'ed 32-bit ARM processors. In fact, the "armv7a" and "armv8m" backends are just the "armv7m" backend compiled for a different architecture. This may change in the future if there are advantages in creating specific optimised backends for ARMv7-A and ARMv8-M.</p>
<p>If the "armv7m" backend does not work on an unsupported 32-bit ARM processor, then it is possible that "armv6" or "armv6m" will work instead (the "armv6" backend is faster). Performance may not be as good as writing a tailored backend for the new processor.</p>
<p>The specific permutation implementation is selected by the include file <a class="el" href="ascon-select-backend_8h_source.html">ascon-select-backend.h</a> which defines the macro <code>ASCON_BACKEND_XYZ</code> to select the <code>XYZ</code> backend. You may need to modify the <code>#ifdef</code>'s in this file if your preferred backend is not recognised.</p>
<p>The <a class="el" href="ascon-select-backend_8h_source.html">ascon-select-backend.h</a> file may also define one of the following extra macros to select the SnP utility implementation to use:</p>
<ul>
<li><code>ASCON_BACKEND_DIRECT_XOR</code> - Bytes can be directly XOR'ed with the ASCON state to absorb data, and directly copied out to squeeze data. This can only be used on platforms that use the big-endian word order of the ASCON standard. Most backends use host byte order instead to avoid the overhead of converting back and forth between little-endian and big-endian. </li>
<li><code>ASCON_BACKEND_SLICED32</code> - The backend uses the 32-bit bit-sliced method to represent the state. 64-bit words in the ASCON state are split into two 32-bit halves. The even and odd bits are placed into different words. This representation usually works best on 32-bit systems. </li>
<li><code>ASCON_BACKEND_SLICED64</code> - The backend uses 64-bit words but they are stored in host byte order instead of the canonical big-endian byte order of the ASCON specification. This representation usually works best on 64-bit systems. </li>
<li><code>ASCON_BACKEND_INIT</code> - The backend has a ascon_backend_init() function that must be called to initialize the permutation as the initialization is more complex than simply clearing the state to zeroes. </li>
<li><code>ASCON_BACKEND_FREE</code> - The backend has a ascon_backend_free() function that must be called to free the permutation and destroy sensitive information in registers and on the stack.</li>
</ul>
<p>The encryption, hashing, and other modes that are implemented in the library have direct knowledge of the underlying word representation of the selected permutation. This allows them to avoid the SnP function call overhead in some cases. User applications do not have access to this information. This keeps the public API simple and makes it easier to enforce binary compatibilty across library versions.</p>
<p>Most user applications have no need for the SnP API because they can use the relevant encryption or hashing API from the library directly. The public SnP API is provided just in case an application has a specific requirement that isn't met by the standard modes. If the new mode is truly useful, then it may be incorporated directly into a future version of the library.</p>
<p>If <a class="el" href="ascon-select-backend_8h_source.html">ascon-select-backend.h</a> cannot locate an assembly code implementation, it will fall back to <a class="el" href="ascon-c64_8c_source.html">ascon-c64.c</a> on recognised 64-bit platforms. Otherwise it will fall back to <a class="el" href="ascon-c32_8c_source.html">ascon-c32.c</a>.</p>
<p>The assembly code implementations were generated using the programs under the <code>tools</code> directory. These tools make it easier to audit the implementation for correctness and to apply incremental optimisations over time.</p>
<p>The generator tools can also be reused across similar platforms; for example, the <code>armv6</code> backend is generated by the same tool as the <code>armv7m</code> backend because other than the ARM-vs-thumb instruction encoding issue, the code is almost identical. The <code>armv7m</code> backend took quite some time to evolve into its current state. The <code>armv6</code> backend was done in a few hours.</p>
<p>If you wish to submit a new backend implementation, please consider writing a generator tool for your platform rather than writing the assembly code by hand. Or modify one of the existing tools that is close enough to almost work.</p>
<p>In the future it may be the case that CPU manufacturers will provide accelerated ASCON encryption and hashing modes in silicon. Depending upon how the silicon is implemented, this may involve writing a new permutation backend or it may involve completely replacing the high-level modes themselves.</p>
<p>Existing accelerators for AES and SHA-256 tend to operate at the mode level rather than the block level. So it is likely that future ASCON accelerators will too. This library can in theory support complete mode replacment by <code>#ifdef</code>'ing out the C version of the mode and providing an alternative implementation. We'll cross that bridge when we come to it. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Apr 24 2022 04:15:55 for ASCON Suite by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
